# 操作系统实验二报告

## 一 、实验内容：

1、当模块被载入内核时会向系统日志文件中写入“hello,world”；当被卸载时，会向系统写入“goodbye”。

2、设计一个模块，要求列出系统中所有内核线程的程序名、PID、进程状态、进程优先级、父进程的PID。

3、设计一个带参数的模块，其参数为某个进程的PID号，模块的功能是列出该进程的家族信息，包括父进程、兄弟进程和子进程的程序名、PID号及进程状态。

## 二、实验思路

![操作系统实验二](/home/david/Desktop/大二第二学期/操作系统/OS-part2/操作系统实验二.png)

## 三、遇到的问题

1、insmod: ERROR: could not insert module family_task.ko: File exists

原因：模块已经装载了，不能重复装载

2、insmod family_task.ko ,不加入pid参数，会装载但是因为pid默认为0，会显示已杀死（没有这个进程），再使用rmmod卸载模块在insmod会进入无线等待中。

3、（p->mm==NULL）这个判断条件的意思是如果这个进程的线程为NULL时就输出，因为这个实验输出的不是所以进程，只输出了在内核空间的进程，没输出用户空间的进程。

